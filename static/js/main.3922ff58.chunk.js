(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{171:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"startAddingPost",(function(){return L})),n.d(a,"startLoadingPost",(function(){return R})),n.d(a,"startRemovingPost",(function(){return A})),n.d(a,"removePost",(function(){return W})),n.d(a,"addPost",(function(){return T})),n.d(a,"addComment",(function(){return X})),n.d(a,"loadPost",(function(){return B}));var r=n(1),o=n.n(r),c=n(86),i=n.n(c),s=(n(97),n(17)),u=n(14),m=n(32),p=n(23),l=n(31),d=[];var f=Object(u.c)({comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"add_comment":return e[t.postId]?Object(l.a)(Object(l.a)({},e),{},Object(p.a)({},t.postId,[].concat(Object(m.a)(e[t.postId]),[t.comment]))):Object(l.a)(Object(l.a)({},e),{},Object(p.a)({},t.postId,[t.comment]));default:return e}},Posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"remove_Post":return[].concat(Object(m.a)(e.slice(0,t.index)),Object(m.a)(e.slice(t.index+1)));case"add_post":return[].concat(Object(m.a)(e),[t.post]);case"Load_Post":return t.posts;default:return e}}}),b=n(40),h=n(15),v=n(16),E=n(19),O=n(18),j=n(30),g=n.n(j);function y(e){var t=e.post;return o.a.createElement("figure",{className:"figure"},o.a.createElement(s.b,{to:"/post/".concat(t.id)},o.a.createElement("img",{className:"photo",src:t.imageLink,alt:t.description})),o.a.createElement("figcaption",null," ",o.a.createElement("p",null," ",t.description," ")," "),o.a.createElement("div",{className:"button-container"},o.a.createElement("button",{className:"remove",onClick:function(){e.startRemovingPost(e.index,t.id),e.history.push("/")}},"Remove")))}y.prototype={post:g.a.object.isRequired};var P=y;var w=function(e){return o.a.createElement("div",null,o.a.createElement(s.b,{to:"/addPhoto",className:"Add"}," ADD "),o.a.createElement("div",{className:"photoGrid"},e.posts.sort((function(e,t){return t.id-e.id})).map((function(t,n){return o.a.createElement(P,Object.assign({key:n,post:t},e,{index:n}))}))))},k=n(26),_=function(e){Object(E.a)(n,e);var t=Object(O.a)(n);function n(){var e;return Object(h.a)(this,n),(e=t.call(this)).SubmitPost=e.SubmitPost.bind(Object(k.a)(e)),e}return Object(v.a)(n,[{key:"SubmitPost",value:function(e){e.preventDefault();var t=e.target.elements.link.value,n=e.target.elements.description.value,a={id:Number(new Date),description:n,imageLink:t};n&&t?(this.props.startAddingPost(a),this.props.onHistory.push("/")):n||t?n?window.alert("please provide a valid link to an image."):window.alert("please give a relatable description for your image."):window.alert("please provide a link and a description")}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("form",{className:"form",onSubmit:this.SubmitPost},o.a.createElement("input",{type:"text",placeholder:"Link",name:"link"}),o.a.createElement("input",{type:"text",placeholder:"Description",name:"description"}),o.a.createElement("button",null,"Post")))}}]),n}(r.Component),N=n(3),S=function(e){Object(E.a)(n,e);var t=Object(O.a)(n);function n(){var e;return Object(h.a)(this,n),(e=t.call(this)).handleSubmit=e.handleSubmit.bind(Object(k.a)(e)),e}return Object(v.a)(n,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=e.target.elements.comment.value;this.props.addComment(t,this.props.id),e.target.elements.comment.value=""}},{key:"render",value:function(){return o.a.createElement("div",{className:"comment"},this.props.comments.map((function(e,t){return o.a.createElement("p",{key:t}," ",e)})),o.a.createElement("form",{className:"comment-form",onSubmit:this.handleSubmit},o.a.createElement("input",{type:"text",placeholder:"comment",name:"comment"}),o.a.createElement("input",{type:"submit",hidden:!0})))}}]),n}(r.Component),D=function(e){Object(E.a)(n,e);var t=Object(O.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"render",value:function(){var e=this.props,t=e.match,n=e.posts,a=Number(t.params.id),r=n.find((function(e){return e.id===a})),c=this.props.comments[a]||[],i=this.props.posts.findIndex((function(e){return e.id===a}));return o.a.createElement("div",{className:"single-photo"},o.a.createElement(P,Object.assign({post:r},this.props,{index:i})),o.a.createElement(S,{addComment:this.props.addComment,comments:c,id:a}))}}]),n}(r.Component),I=function(e){Object(E.a)(n,e);var t=Object(O.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"componentDidMount",value:function(){this.props.startLoadingPost()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("h1",null,o.a.createElement(s.b,{to:"/"},"Photowall")),o.a.createElement(N.a,{exact:!0,path:"/",render:function(){return o.a.createElement("div",null,o.a.createElement(w,e.props))}}),o.a.createElement(N.a,{path:"/addPhoto",render:function(t){var n=t.history;return o.a.createElement(_,Object.assign({},e.props,{onHistory:n}))}}),o.a.createElement(N.a,{path:"/post/:id",render:function(t){return o.a.createElement(D,Object.assign({},e.props,t))}}))}}]),n}(r.Component),x=n(53);x.initializeApp({apiKey:"AIzaSyDlOPAWWtrB1vWg17d3uPWjLxRleh9oCDA",authDomain:"thephotowallapp.firebaseapp.com",databaseURL:"https://thephotowallapp.firebaseio.com",projectId:"thephotowallapp",storageBucket:"thephotowallapp.appspot.com",messagingSenderId:"582655079973",appId:"1:582655079973:web:e352f12f39739701a171cc",measurementId:"G-754C3MRNWZ"});var C=x.database();function L(e){return function(t){return C.ref("posts").update(Object(p.a)({},e.id,e)).then((function(){t(T(e))}))}}function R(){return function(e){return C.ref("posts").once("value").then((function(t){var n=[];t.forEach((function(e){n.push(e.val())})),e(B(n))}))}}function A(e,t){return function(n){return C.ref("posts/".concat(t)).remove().then((function(){n(W(e))}))}}function W(e){return{type:"remove_Post",index:e}}function T(e){return{type:"add_post",post:e}}function X(e,t){return{type:"add_comment",comment:e,postId:t}}function B(e){return{type:"Load_Post",posts:e}}var U=Object(N.e)(Object(b.b)((function(e){return{posts:e.Posts,comments:e.comments}}),(function(e){return Object(u.b)(a,e)}))(I)),z=n(91),G=n.n(z),H=Object(u.d)(f,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),Object(u.a)(G.a));i.a.render(o.a.createElement(b.a,{store:H},o.a.createElement(s.a,null,o.a.createElement(U,null))),document.getElementById("root"))},92:function(e,t,n){e.exports=n(171)},97:function(e,t,n){}},[[92,1,2]]]);
//# sourceMappingURL=main.3922ff58.chunk.js.map